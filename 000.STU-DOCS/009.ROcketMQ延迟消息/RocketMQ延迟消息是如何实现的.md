# RocketMQ延迟消息是如何实现
> 先阅读: [RocketMQ 消息集成：多类型业务消息——定时消息](./RocketMQ%20消息集成：多类型业务消息——定时消息.pdf) 、 [RocketMQ延迟消息是如何实现的](./RocketMQ延迟消息是如何实现的.md)

## 延迟消息原理
1. 先将消息投递到 '系统定时Topic' 中 ， 再在特定的时间将消息转到 '用户Topic'中 , 参考: [RocketMQ 消息集成：多类型业务消息——定时消息](./RocketMQ%20消息集成：多类型业务消息——定时消息.pdf)

## 延迟/定时 时间如何计算
> 统一计算为绝对时间

定时消息：例如，当前系统时间为2022-06-09 17:30:00，您希望消息在下午19:20:00定时投递，则定时时间为2022-06-09 19:20:00，转换成时间戳格式为1654773600000。

延时消息：例如，当前系统时间为2022-06-09 17:30:00，您希望延时1个小时后投递消息，则您需要根据当前时间和延时时长换算成定时时刻，即消息投递时间为2022-06-09 18:30:00，转换为时间戳格式为1654770600000。